"use strict";(self.webpackChunkstarlake_docs=self.webpackChunkstarlake_docs||[]).push([[508],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return c}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=p(n),c=r,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||l;return n?a.createElement(k,o(o({ref:t},d),{},{components:n})):a.createElement(k,o({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4721:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return i},metadata:function(){return s},toc:function(){return p},default:function(){return m}});var a=n(7462),r=n(3366),l=(n(7294),n(3905)),o={sidebar_position:3},i="Example",s={unversionedId:"userguide/sample",id:"userguide/sample",isDocsHomePage:!1,title:"Example",description:"Say we have to ingest customers, orders and sellers into the datalake.",source:"@site/docs/userguide/sample.md",sourceDirName:"userguide",slug:"/userguide/sample",permalink:"/starlake/docs/userguide/sample",editUrl:"https://github.com/starlake-ai/starlake/edit/master/docs/docs/userguide/sample.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"cometSidebar",previous:{title:"Quick Start",permalink:"/starlake/docs/userguide/quickstart"},next:{title:"Configuration",permalink:"/starlake/docs/reference/configuration"}},p=[],d={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"example"},"Example"),(0,l.kt)("p",null,'Say we have to ingest customers, orders and sellers into the datalake.\nThe customers and orders are provided by the "sales" department while\nthe sellers and locations datasets are provided by the HR department.'),(0,l.kt)("p",null,"The orders dataset contains new, updated and deleted orders.\nOnce imported, we want the deleted orders to be removed from the dataset and\nwe want to keep only the last update of each order."),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"locations")," dataset should replace the previous imported ",(0,l.kt)("inlineCode",{parentName:"p"},"locations")," dataset\nwhile all others datasets are just updates of the previous imported ones."),(0,l.kt)("p",null,'The customers and orders dataset are sent by the "sales" department\nas CSV  files. Below is an extract of these files.'),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},'File customers-2018-05-10.psv from "sales" department')),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"id"),(0,l.kt)("th",{parentName:"tr",align:null},"signup"),(0,l.kt)("th",{parentName:"tr",align:null},"contact"),(0,l.kt)("th",{parentName:"tr",align:null},"birthdate"),(0,l.kt)("th",{parentName:"tr",align:null},"name1"),(0,l.kt)("th",{parentName:"tr",align:null},"name2"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"A009701"),(0,l.kt)("td",{parentName:"tr",align:null},"2010-01-31 23:04:15"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"mailto:me@home.com"},"me@home.com")),(0,l.kt)("td",{parentName:"tr",align:null},"1980-10-14"),(0,l.kt)("td",{parentName:"tr",align:null},"Donald"),(0,l.kt)("td",{parentName:"tr",align:null},"Obama")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"B308629"),(0,l.kt)("td",{parentName:"tr",align:null},"2016-12-01 09:56:02"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"mailto:you@land.com"},"you@land.com")),(0,l.kt)("td",{parentName:"tr",align:null},"1980-10-14"),(0,l.kt)("td",{parentName:"tr",align:null},"Barack"),(0,l.kt)("td",{parentName:"tr",align:null},"Trump")))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},'File orders-2018-05-10.csv from the "sales" department')),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"order_id"),(0,l.kt)("th",{parentName:"tr",align:null},"customer_id"),(0,l.kt)("th",{parentName:"tr",align:null},"amount"),(0,l.kt)("th",{parentName:"tr",align:null},"seller_id"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"12345"),(0,l.kt)("td",{parentName:"tr",align:null},"A009701"),(0,l.kt)("td",{parentName:"tr",align:null},"123.65"),(0,l.kt)("td",{parentName:"tr",align:null},"AQZERD")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"56432"),(0,l.kt)("td",{parentName:"tr",align:null},"B308629"),(0,l.kt)("td",{parentName:"tr",align:null},"23.8"),(0,l.kt)("td",{parentName:"tr",align:null},"AQZERD")))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\ud83d\udcdd ",(0,l.kt)("strong",{parentName:"p"},'Before sending the files, the "sales" department zip all its files\ninto a single compressed files and put them in the folder /mnt/incoming/sales of the landing area.'))),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"sellers")," dataset is sent as JSON array by the HR department."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"File sellers-2018-05-10.json from the HR department")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n{ "id":"AQZERD", "seller_email":"me@acme.com", "location_id": 1},\n{ "id":"TYUEZG", "seller_email":"acme.com","location_id": 2 }\n\n]\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"File locations-2018-05-10.json from the HR department")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{ "id":1, "address": { "city":"Paris", "stores": ["Store 1", "Store 2", "Store 3"] "country":"France" }}\n{ "id":2, "address": { "city":"Berlin", "country":"Germany" }}\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\ud83d\udcdd ",(0,l.kt)("strong",{parentName:"p"},"the HR department does not zip its files. It simply copy them into the\nfolder /mnt/incoming/hr of the landing area."))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f ",(0,l.kt)("strong",{parentName:"p"},"We intentionnally set an invalid email for the second seller."))))}m.isMDXComponent=!0}}]);